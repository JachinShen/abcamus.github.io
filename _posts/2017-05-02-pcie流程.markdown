---
layout: post
title:  "PCI-e host工作流程"
author: Kai Qiu
date:   2017-05-02 21:22:37 +0800
categories: 嵌入式开发
tags: pcie
excerpt: 根据pcie驱动来认识pcie的工作流程
---

* menu
{:toc}

> 

## 一、pcie术语

IATU: Internal Address Translation Table，实现`CFG_TYPE0`和`CFG_TYPE1`的配置事务访问（寄存器的具体配置请结合datasheet ATU地址转换）。
BARS: Base Address Register
LTSSM: Link Training and Status State Machine

## 二、流程

1. establish link: disable LTSSM->link configuration->enable LTSSM
2. setup region: configure the iATU region for outbound access
3. set the RC CFG header
4. configure the host BARs

